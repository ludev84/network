{% extends "network/layout.html" %}

{% block body %}

    <h2>Profile: {{ profile_user }}</h2>
    <p>Followers: {{ followers_count }} | Following: {{ following_count }}</p>

    {% if user.is_authenticated and user.username != profile_user.username %}
        <form method="post" action="{% url 'follow' profile_user.username %}">
            {% csrf_token %}
            {% if is_following %}
                <button type="submit" name="action" value="unfollow" class="btn btn-danger">Unfollow</button>
            {% else %}
                <button type="submit" name="action" value="follow" class="btn btn-primary">Follow</button>
            {% endif %}
        </form>
    {% endif %}

    <h3>Posts by {{ profile_user }}</h3>

    {% if posts %}
        <div class="posts-list">
            {% for post in posts %}
                <div class="post">
                    <p><strong>{{ post.user.username }}</strong> <small>{{ post.created_at|date:"Y-m-d H:i" }}</small></p>
                    <p>{{ post.content }}</p>
                    <p>&#x2764; 0</p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No posts available.</p>
    {% endif %}

{% endblock %}